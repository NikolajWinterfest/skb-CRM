## О проекте

<div>
  <img src="/CRM.png" title="CRM" alt="CRM" />&nbsp;
</div>

## Цель проекта:

Разработать web-интерфейс для CRM системы по макету [skb-CRM](<https://www.figma.com/file/4WGwFot1nV9n3wmqDcIkCM/CRM-(Copy)?type=design&node-id=211-746&mode=design&t=f9yvCjEwlQWjRER0-0>)

## Задачи проекта:

-   Адаптивная вёрстка (от 1024px до 320px)
-   Просмотр списка клиентов в виде таблицы
-   Добавление нового клиента со следующими данными (email, номер телефона, социальные сети и др.)
-   Изменение и удаление данных клиента
-   Каждый контакт должен содержать Имя, Фамилия, Отчество и массив объектов (тип контакта - значение контакта)
-   Сортировка по ФИО, дате создания контакта и дате изменения
-   Поиск клиента в базе данных по его ФИО
-   Отображение данных контактов клиента при наведении курсора мыши на иконку контакта (тип - значение)
-   Форма создания или редактирования данных клиента должно открываться в виде модального окна
-   Максимальное количество контактных данных клиента (для связи) - 10
-   Проверить валидаторы HTML и CSS на отсутствие ошибок, а также HTML Tree Generator на БЭМ
-   Соблюдать кодстайл

## Технологии

<div>
  <img src="https://github.com/NikolajWinterfest/NikolajWinterfest/blob/master/assets/icons/JavaScript.svg" title="javascript" alt="javascript" width="40" height="40"/>&nbsp;
  <img src="https://github.com/NikolajWinterfest/NikolajWinterfest/blob/master/assets/icons/CSS.svg" title="css3" alt="css3" width="40" height="40"/>&nbsp;
  <img src="https://github.com/NikolajWinterfest/NikolajWinterfest/blob/master/assets/icons/HTML.svg" title="html5" alt="html5" width="40" height="40"/>&nbsp;
  <img src="https://github.com/NikolajWinterfest/NikolajWinterfest/blob/master/assets/icons/Git.svg" title="git" alt="git" width="40" height="40"/>&nbsp;
</div>

## Запуск проекта

### Склонировать проект на ваш компьютер с Github с помощью команды:

```
git clone https://github.com/NikolajWinterfest/skb-CRM.git
```

# REST API для базы данных клиентов

Перед запуском убедитесь, что вы установили Node.js версии 12 или выше.

Для запуска сервера перейдите в папку с репозиторием и выполните команду `node index`. Для остановки нажмите сочетание клавиш CTRL+C.

После запуска сервера API будет доступен по пути `http://localhost:3000`.

## Методы API

Все методы API, требующие тела запроса, ожидают получить тело в виде JSON. Ответы всех методов также отдаются в виде JSON.

-   `GET /api/clients` получить список клиентов. Параметры, передаваемые в URL:
    -   `search={search string}` поисковый запрос, при передаче метод вернёт клиентов, у которых имя, фамилия, отчество или значение одного из контактов содержат указанную подстроку
-   `POST /api/clients` создать нового клиента. В теле запроса нужно передать объект клиента. Тело ответа успешно обработанного запроса будет содержать объект с созданным клиентом.
-   `GET /api/client/{id}` получить данные клиента по его ID. Тело ответа успешно обработанного запроса будет содержать объект клиента.
-   `PATCH /api/client/{id}` перезаписать данные о клиенте с переданным ID. Тело ответа успешно обработанного запроса будет содержать объект с обновлённым клиентом.
-   `DELETE /api/client/{id}` удалить клиента с переданному ID.

## Структура объекта клиента

```javascript
{
  // ID клиента, заполняется сервером автоматически, после создания нельзя изменить
  id: '1234567890',
  // дата и время создания клиента, заполняется сервером автоматически, после создания нельзя изменить
  createdAt: '2021-02-03T13:07:29.554Z',
  // дата и время изменения клиента, заполняется сервером автоматически при изменении клиента
  updatedAt: '2021-02-03T13:07:29.554Z',
  // * обязательное поле, имя клиента
  name: 'Василий',
  // * обязательное поле, фамилия клиента
  surname: 'Пупкин',
  // необязательное поле, отчество клиента
  lastName: 'Васильевич',
  // контакты - необязательное поле, массив контактов
  // каждый объект в массиве (если он передан) должен содержать непустые свойства type и value
  contacts: [
    {
      type: 'Телефон',
      value: '+71234567890'
    },
    {
      type: 'Email',
      value: 'abc@xyz.com'
    },
    {
      type: 'Facebook',
      value: 'https://facebook.com/vasiliy-pupkin-the-best'
    }
  ]
}
```

## Возможные статусы ответов

Ответ сервера может содержать один из статусов ответа:

-   `200` - запрос обработан нормально
-   `201` - запрос на создание нового элемента успешно обработан, а заголовок ответа Location содержит ссылку на GET метод получения созданного элемента
-   `404` - переданный в запросе метод не существует или запрашиваемый элемент не найден в базе данных
-   `422` - объект, переданный в теле запроса, не прошёл валидацию. Тело ответа содержит массив с описаниями ошибок валидации:
    ```javascript
    ;[
        {
            field: 'Название поля объекта, в котором произошла ошибка',
            message: 'Сообщение об ошибке, которое можно показать пользователю',
        },
    ]
    ```
-   `500` - странно, но сервер сломался <br>Обратитесь к куратору Skillbox, чтобы решить проблему
